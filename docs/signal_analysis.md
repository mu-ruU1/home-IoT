# 赤外線信号の解析

- Panasonic 製エアコンのリモコンは家製協(AEHA)[フォーマット](http://elm-chan.org/docs/ir_format.html)が使用されています
- タイマー, ナノイー, おやすみ, におい除去の機能は使用しないものとします

## 目次

1. [モード](#モード)
2. [温度](#温度)
3. [風量](#風量)
4. [風向](https://github.com/mu-ruU1/home-IoT/blob/main/docs/signal_analysis.md#%E9%A2%A8%E5%90%91-%E4%B8%8A--%E4%B8%8B)
5. [結果](#結果)

---

## モード

> 温度: 20℃, 風量: 自動, 風向: 自動  
> として固定する

### 1. 暖房

```json
{
  "format": "AEHA",
  "data": [
    [2, 32, 224, 4, 0, 0, 0, 6],
    [2, 32, 224, 4, 0, 73, 40, 128, 175, 13, 0, 14, 224, 0, 0, 134, 0, 4, 43]
  ]
}
```

### 2. 冷房

```json
{
  "format": "AEHA",
  "data": [
    [2, 32, 224, 4, 0, 0, 0, 6],
    [2, 32, 224, 4, 0, 57, 40, 128, 175, 13, 0, 14, 224, 0, 0, 134, 0, 4, 27]
  ]
}
```

### 3. 除湿

```json
{
  "format": "AEHA",
  "data": [
    [2, 32, 224, 4, 0, 0, 0, 6],
    [2, 32, 224, 4, 0, 41, 40, 128, 175, 13, 0, 14, 224, 0, 0, 134, 0, 4, 11]
  ]
}
```

### 4. 除湿弱

```json
{
  "format": "AEHA",
  "data": [
    [2, 32, 224, 4, 0, 0, 0, 6],
    [2, 32, 224, 4, 0, 41, 40, 127, 175, 13, 0, 14, 224, 0, 0, 134, 0, 4, 10]
  ]
}
```

### 5. 暖房 → 停止

```json
{
  "format": "AEHA",
  "data": [
    [2, 32, 224, 4, 0, 0, 0, 6],
    [2, 32, 224, 4, 0, 72, 40, 128, 175, 13, 0, 14, 224, 0, 0, 134, 0, 4, 42]
  ]
}
```

### 6. 冷房 → 停止

```json
{
  "format": "AEHA",
  "data": [
    [2, 32, 224, 4, 0, 0, 0, 6],
    [2, 32, 224, 4, 0, 56, 40, 128, 175, 13, 0, 14, 224, 0, 0, 134, 0, 4, 26]
  ]
}
```

### 7. 除湿 → 停止

```json
{
  "format": "AEHA",
  "data": [
    [2, 32, 224, 4, 0, 0, 0, 6],
    [2, 32, 224, 4, 0, 40, 40, 128, 175, 13, 0, 14, 224, 0, 0, 134, 0, 4, 10]
  ]
}
```

### 8. 除湿弱 → 停止

```json
{
  "format": "AEHA",
  "data": [
    [2, 32, 224, 4, 0, 0, 0, 6],
    [2, 32, 224, 4, 0, 40, 40, 127, 175, 13, 0, 14, 224, 0, 0, 134, 0, 4, 9]
  ]
}
```

---

## 温度

> モード: 暖房, 風量: 自動, 風向: 自動  
> として固定する

### 1. 16℃

```json
{
  "format": "AEHA",
  "data": [
    [2, 32, 224, 4, 0, 0, 0, 6],
    [2, 32, 224, 4, 0, 73, 32, 128, 175, 13, 0, 14, 224, 0, 2, 134, 0, 4, 37]
  ]
}
```

### 2. 17℃

```json
{
  "format": "AEHA",
  "data": [
    [2, 32, 224, 4, 0, 0, 0, 6],
    [2, 32, 224, 4, 0, 73, 34, 128, 175, 13, 0, 14, 224, 0, 0, 134, 0, 4, 37]
  ]
}
```

### 3. 18℃

```json
{
  "format": "AEHA",
  "data": [
    [2, 32, 224, 4, 0, 0, 0, 6],
    [2, 32, 224, 4, 0, 73, 36, 128, 175, 13, 0, 14, 224, 0, 0, 134, 0, 4, 39]
  ]
}
```

### 4. 19℃

```json
{
  "format": "AEHA",
  "data": [
    [2, 32, 224, 4, 0, 0, 0, 6],
    [2, 32, 224, 4, 0, 73, 38, 128, 175, 13, 0, 14, 224, 0, 0, 134, 0, 4, 41]
  ]
}
```

### 5. 20℃

```json
{
  "format": "AEHA",
  "data": [
    [2, 32, 224, 4, 0, 0, 0, 6],
    [2, 32, 224, 4, 0, 73, 40, 128, 175, 13, 0, 14, 224, 0, 0, 134, 0, 4, 43]
  ]
}
```

### 6. 21℃

```json
{
  "format": "AEHA",
  "data": [
    [2, 32, 224, 4, 0, 0, 0, 6],
    [2, 32, 224, 4, 0, 73, 42, 128, 175, 13, 0, 14, 224, 0, 0, 134, 0, 4, 45]
  ]
}
```

### 7. 22℃

```json
{
  "format": "AEHA",
  "data": [
    [2, 32, 224, 4, 0, 0, 0, 6],
    [2, 32, 224, 4, 0, 73, 44, 128, 175, 13, 0, 14, 224, 0, 0, 134, 0, 4, 47]
  ]
}
```

### 8. 23℃

```json
{
  "format": "AEHA",
  "data": [
    [2, 32, 224, 4, 0, 0, 0, 6],
    [2, 32, 224, 4, 0, 73, 46, 128, 175, 13, 0, 14, 224, 0, 0, 134, 0, 4, 49]
  ]
}
```

### 9. 24℃

```json
{
  "format": "AEHA",
  "data": [
    [2, 32, 224, 4, 0, 0, 0, 6],
    [2, 32, 224, 4, 0, 73, 48, 128, 175, 13, 0, 14, 224, 0, 0, 134, 0, 4, 51]
  ]
}
```

### 10. 25℃

```json
{
  "format": "AEHA",
  "data": [
    [2, 32, 224, 4, 0, 0, 0, 6],
    [2, 32, 224, 4, 0, 73, 50, 128, 175, 13, 0, 14, 224, 0, 0, 134, 0, 4, 53]
  ]
}
```

### 11. 26℃

```json
{
  "format": "AEHA",
  "data": [
    [2, 32, 224, 4, 0, 0, 0, 6],
    [2, 32, 224, 4, 0, 73, 52, 128, 175, 13, 0, 14, 224, 0, 0, 134, 0, 4, 55]
  ]
}
```

### 12. 27℃

```json
{
  "format": "AEHA",
  "data": [
    [2, 32, 224, 4, 0, 0, 0, 6],
    [2, 32, 224, 4, 0, 73, 54, 128, 175, 13, 0, 14, 224, 0, 0, 134, 0, 4, 57]
  ]
}
```

### 13. 28℃

```json
{
  "format": "AEHA",
  "data": [
    [2, 32, 224, 4, 0, 0, 0, 6],
    [2, 32, 224, 4, 0, 73, 56, 128, 175, 13, 0, 14, 224, 0, 0, 134, 0, 4, 59]
  ]
}
```

### 14. 29℃

```json
{
  "format": "AEHA",
  "data": [
    [2, 32, 224, 4, 0, 0, 0, 6],
    [2, 32, 224, 4, 0, 73, 58, 128, 175, 13, 0, 14, 224, 0, 0, 134, 0, 4, 61]
  ]
}
```

### 15. 30℃

```json
{
  "format": "AEHA",
  "data": [
    [2, 32, 224, 4, 0, 0, 0, 6],
    [2, 32, 224, 4, 0, 73, 60, 128, 175, 13, 0, 14, 224, 0, 2, 134, 0, 4, 65]
  ]
}
```

---

## 風量

> モード: 暖房, 温度: 20℃, 風向: 自動  
> として固定する

### 1. 自動

```json
{
  "format": "AEHA",
  "data": [
    [2, 32, 224, 4, 0, 0, 0, 6],
    [2, 32, 224, 4, 0, 73, 40, 128, 175, 13, 0, 14, 224, 0, 0, 134, 0, 4, 43]
  ]
}
```

### 2. 静

```json
{
  "format": "AEHA",
  "data": [
    [2, 32, 224, 4, 0, 0, 0, 6],
    [2, 32, 224, 4, 0, 73, 40, 128, 63, 13, 0, 14, 224, 32, 0, 134, 0, 4, 219]
  ]
}
```

### 3. 1/4

```json
{
  "format": "AEHA",
  "data": [
    [2, 32, 224, 4, 0, 0, 0, 6],
    [2, 32, 224, 4, 0, 73, 40, 128, 63, 13, 0, 14, 224, 0, 0, 134, 0, 4, 187]
  ]
}
```

### 4. 2/4

```json
{
  "format": "AEHA",
  "data": [
    [2, 32, 224, 4, 0, 0, 0, 6],
    [2, 32, 224, 4, 0, 73, 40, 128, 79, 13, 0, 14, 224, 0, 0, 134, 0, 4, 203]
  ]
}
```

### 5. 3/4

```json
{
  "format": "AEHA",
  "data": [
    [2, 32, 224, 4, 0, 0, 0, 6],
    [2, 32, 224, 4, 0, 73, 40, 128, 95, 13, 0, 14, 224, 0, 0, 134, 0, 4, 219]
  ]
}
```

### 6. 4/4

```json
{
  "format": "AEHA",
  "data": [
    [2, 32, 224, 4, 0, 0, 0, 6],
    [2, 32, 224, 4, 0, 73, 40, 128, 127, 13, 0, 14, 224, 0, 0, 134, 0, 4, 251]
  ]
}
```

### 7. パワフル

```json
{
  "format": "AEHA",
  "data": [
    [2, 32, 224, 4, 0, 0, 0, 6],
    [2, 32, 224, 4, 0, 73, 40, 128, 175, 13, 0, 14, 224, 1, 0, 134, 0, 4, 44]
  ]
}
```

---

## 風向 (上 → 下)

> モード: 暖房, 温度: 20℃, 風量: 自動  
> として固定する

### 1. 自動

```json
{
  "format": "AEHA",
  "data": [
    [2, 32, 224, 4, 0, 0, 0, 6],
    [2, 32, 224, 4, 0, 73, 40, 128, 175, 13, 0, 14, 224, 0, 0, 134, 0, 4, 43]
  ]
}
```

### 2. 1/5

```json
{
  "format": "AEHA",
  "data": [
    [2, 32, 224, 4, 0, 0, 0, 6],
    [2, 32, 224, 4, 0, 73, 40, 128, 161, 13, 0, 14, 224, 0, 0, 134, 0, 4, 29]
  ]
}
```

### 3. 2/5

```json
{
  "format": "AEHA",
  "data": [
    [2, 32, 224, 4, 0, 0, 0, 6],
    [2, 32, 224, 4, 0, 73, 40, 128, 162, 13, 0, 14, 224, 0, 0, 134, 0, 4, 30]
  ]
}
```

### 4. 3/5

```json
{
  "format": "AEHA",
  "data": [
    [2, 32, 224, 4, 0, 0, 0, 6],
    [2, 32, 224, 4, 0, 73, 40, 128, 163, 13, 0, 14, 224, 0, 0, 134, 0, 4, 31]
  ]
}
```

### 5. 4/5

```json
{
  "format": "AEHA",
  "data": [
    [2, 32, 224, 4, 0, 0, 0, 6],
    [2, 32, 224, 4, 0, 73, 40, 128, 164, 13, 0, 14, 224, 0, 0, 134, 0, 4, 32]
  ]
}
```

### 6. 5/5

```json
{
  "format": "AEHA",
  "data": [
    [2, 32, 224, 4, 0, 0, 0, 6],
    [2, 32, 224, 4, 0, 73, 40, 128, 165, 13, 0, 14, 224, 0, 0, 134, 0, 4, 33]
  ]
}
```

## 風向 (左 → 右)

> モード: 暖房, 温度: 20℃, 風量: 自動  
> として固定する

### 1. 自動

```json
{
  "format": "AEHA",
  "data": [
    [2, 32, 224, 4, 0, 0, 0, 6],
    [2, 32, 224, 4, 0, 73, 40, 128, 175, 13, 0, 14, 224, 0, 0, 134, 0, 4, 43]
  ]
}
```

### 2. 1/5

```json
{
  "format": "AEHA",
  "data": [
    [2, 32, 224, 4, 0, 0, 0, 6],
    [2, 32, 224, 4, 0, 73, 40, 128, 175, 9, 0, 14, 224, 0, 0, 134, 0, 4, 39]
  ]
}
```

### 3. 2/5

```json
{
  "format": "AEHA",
  "data": [
    [2, 32, 224, 4, 0, 0, 0, 6],
    [2, 32, 224, 4, 0, 73, 40, 128, 175, 10, 0, 14, 224, 0, 0, 134, 0, 4, 40]
  ]
}
```

### 4. 3/5

```json
{
  "format": "AEHA",
  "data": [
    [2, 32, 224, 4, 0, 0, 0, 6],
    [2, 32, 224, 4, 0, 73, 40, 128, 175, 6, 0, 14, 224, 0, 0, 134, 0, 4, 36]
  ]
}
```

### 5. 4/5

```json
{
  "format": "AEHA",
  "data": [
    [2, 32, 224, 4, 0, 0, 0, 6],
    [2, 32, 224, 4, 0, 73, 40, 128, 175, 11, 0, 14, 224, 0, 0, 134, 0, 4, 41]
  ]
}
```

### 6. 5/5

```json
{
  "format": "AEHA",
  "data": [
    [2, 32, 224, 4, 0, 0, 0, 6],
    [2, 32, 224, 4, 0, 73, 40, 128, 175, 12, 0, 14, 224, 0, 0, 134, 0, 4, 42]
  ]
}
```

---

## 結果

T(変調単位) = 350 ～ 500μs (425μs typ.)

### 1. モード

#### **6Byte: モード・電源**

8-5bit: モード

| モード | 8-4bit |
| :----: | :----: |
|  暖房  |  0100  |
|  冷房  |  0011  |
|  除湿  |  0010  |
| 除湿弱 |  0010  |

1bit: 電源

| 電源 | 1bit |
| :--: | :--: |
|  ON  |  1   |
| OFF  |  0   |

#### **8Byte: 除湿・除湿弱の判定**

8-1bit: 除湿・除湿弱の判定

| モード | 8-5bit | 4-1bit |
| :----: | :----: | :----: |
| 除湿弱 |  0111  |  1111  |
|  以外  |  1000  |  0000  |

---

### 2. 温度

#### **7Byte: 温度**

5-2bit: 温度

| 温度 | 5-2bit |
| :--: | :----: |
| 16℃  |  0000  |
| 17℃  |  0001  |
| 18℃  |  0010  |
| 19℃  |  0011  |
| 20℃  |  0100  |
| 21℃  |  0101  |
| 22℃  |  0110  |
| 23℃  |  0111  |
| 24℃  |  1000  |
| 25℃  |  1001  |
| 26℃  |  1010  |
| 27℃  |  1011  |
| 28℃  |  1100  |
| 29℃  |  1101  |
| 30℃  |  1110  |

#### **15Byte: 温度**

2bit: 温度

|   温度   | 2bit |
| :------: | :--: |
| 16℃・30℃ |  1   |
|   以外   |  0   |

<!--
for num in range(15):
  res = 32 + num * 2
  bin = format(res,"b")
  print(res, " -> ", bin)
-->

---

### 3. 風量

#### **9Byte: 風量**

8-5bit: 風量

|      風量      | 8-5bit |
| :------------: | :----: |
| 自動・パワフル |  1010  |
|    静・1/4     |  0011  |
|      2/4       |  0100  |
|      3/4       |  0101  |
|      4/4       |  0111  |

#### **14Byte: 風量**

8-1bit: 風量

|   風量   | 8-5bit | 4-1bit |
| :------: | :----: | :----: |
|    静    |  0010  |  0000  |
| パワフル |  0000  |  0001  |
|   以外   |  0000  |  0000  |

---

### 4. 風向

#### **9Byte: 風向 (上 → 下)**

4-1bit: 風向 (上 → 下)

| 風向 | 4-1bit |
| :--: | :----: |
| 自動 |  1111  |
| 1/5  |  0001  |
| 2/5  |  0010  |
| 3/5  |  0011  |
| 4/5  |  0100  |
| 5/5  |  0101  |

#### **10Byte: 風向 (左 → 右)**

4-1bit: 風向 (左 → 右)

| 風向 | 4-1bit |
| :--: | :----: |
| 自動 |  1101  |
| 1/5  |  1001  |
| 2/5  |  1010  |
| 3/5  |  0110  |
| 4/5  |  1011  |
| 5/5  |  1100  |
